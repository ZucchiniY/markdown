---
title: 在 vi 中删除空行和注释
abbrlink: 5af099d6
date: 2021-01-29 09:10:48
updated: 2021-07-08 09:10:48
tags:
    - vi/vim
    - regexp
categories:
    - 工具环境
    - Linux
keywords:
    - Vim
    - 正则
    - 删除空行
description: 在 Vi 中利用正则表达式删除多余的空行。
---

> 正则小知识：
> 1. ^ 表示行首，$ 表示行尾

所以如果想删除空行，就是行首与行尾间无内容的行，即：

```sh 删除空行
:g/^$/d
```

> 正则小知识：
> 2. \s 表示空白字符，包括空格、制表符、换页符等，等价于 [\f\n\r\t\v]
> 3. * 表示有 0 个或者多个

所以想删除空行或者空白行的话，就是匹配 0 个或者多个空白字符的情况，即：`\s*` 。

```sh 删除空行以及只有空格的行
:g/^\s*$/d
```

同样道理，如果是以 # 开头或者是以空白字符开头，但第一个非空白字符为 # 号的行，则是使用 `\s*#` 。
```sh 删除以 # 开头或 空白#开头的行
:g/^\s*#/d
```

删除包含某个字符串的行，则只需要使用匹配模式，再进行删除即可。
```sh 如果当前行包含 bbs ，则删除当前行
:/bbs/d
```

这种删除模式还可以指定起始的行号。
```sh 删除从第二行到包含 bbs 的区间行
:2,/bbs/d
```

> vi 小知识：
> 1. :g 是指的全局命令，
```sh 删除所有包含 bbs 的行
:g/bbs/d
```

> 正则小知识
> 4. . 是匹配一个字符，而且是仅一个字符。
> 5. ？是匹配 1 个或者 0 个字符。 

```sh 删除匹配 bbs 且前面只有一个字符的行
:g/.bbs/d
```

```sh 删除匹配 bbs 且以它开头的行
:g/^bbs/d
```

```sh 删除匹配 bbs 且以它结尾的行
:g/bbs$/d
```

> vi 小知识：
> 2. s 是 vi 中的替换命令，比如 `:s/vivivi/vmv/` 是指的将 vivivi 替换为 vmv 字符串。
> 3. %s 是全局替换命令，等同于 `:g/vivivi/s//vmv/` 也就是将整个文件中的所有行中的第一个 vivivi 替换为 vmv 。
> 4. 如何将一行中所有的匹配的字符都替换呢，只需要在最后加一个 `/g` 即可。
```sh 删除 # 之后所有字符
%s/\#.*//g
```
